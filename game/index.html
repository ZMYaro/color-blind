<!DOCTYPE html>
<html>
	<head>
		<title>Color Blind</title>
		
		<link rel="stylesheet" type="text/css" href="styles/styles.css" />
		
		<script type="text/javascript" src="scripts/levels.js"></script>
		<script type="text/javascript" src="scripts/utils.js"></script>
		
		<script type="text/javascript" src="scripts/imageManager.js"></script>
		
		<script type="text/javascript" src="scripts/KeyboardManager.js"></script>
		<script type="text/javascript" src="scripts/GamepadManager.js"></script>
		<script type="text/javascript" src="scripts/InputManager.js"></script>
		
		<script type="text/javascript" src="scripts/Game.js"></script>
		<script type="text/javascript" src="scripts/GameObject.js"></script>
		<script type="text/javascript" src="scripts/Player.js"></script>
		<script type="text/javascript" src="scripts/Platform.js"></script>
		<script type="text/javascript" src="scripts/Collectible.js"></script>
		<script type="text/javascript" src="scripts/Bolt.js"></script>
		<script type="text/javascript" src="scripts/BigPart.js"></script>
		
		<script type="text/javascript">
			var MENU_LEVEL = 0;
			
			window.onload = preloadImages;
			
			function preloadImages() {
				var progressBar = document.getElementById('loadProgress'),
					imagesLoaded = 0,
					imageNames = [
						Player.SPRITE_SHEET,
						Bolt.SPRITE_SHEET
					];
				
				progressBar.max = imageNames.length;
				
				imageNames.forEach(function (imageName) {
					imageManager.loadImage(imageName, function () {
						imagesLoaded++;
						progressBar.value = imagesLoaded;
						if (imagesLoaded === imageNames.length) {
							startGame();
							progressBar.style.display = 'none';
						}
					});
				});
			}
			
			function startGame() {
				var canvas = document.getElementById('gameCanvas'),
					game = new Game(canvas);
				
				game.loadLevel(MENU_LEVEL);
				game.resume();
			}
		</script>
	</head>
	<body>
		<canvas id="gameCanvas"></canvas>
		<progress id="loadProgress" />
	</body>
</html>
